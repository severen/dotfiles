# shellcheck shell=bash

# This .bashrc is essentially a stub to ensure that all of the POSIX profile
# scripts are sourced prior to running Fish, which is _not_ POSIX compliant (and
# that is a good thing!).

# These do not need to be explicitly set, but they are useful to be able to
# reference.
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_DATA_HOME="$HOME/.local/share"
export XDG_STATE_HOME="$HOME/.local/state"
export XDG_CACHE_HOME="$HOME/.cache"

# Only switch to fish if:
#   + It is present in $PATH.
#   + It is not the parent process.
#   + We are not executing a string of bash code (eg. `bash -c 'echo test'`).
#   + We are not already in an interactive bash shell.
if command -v fish &> /dev/null && [[
    "$(ps --no-header --pid=$PPID --format=cmd)" != "fish" &&
    -z $BASH_EXECUTION_STRING &&
    $SHLVL == 1
  ]]
then
  shopt -q login_shell && LOGIN_OPTION='--login' || LOGIN_OPTION=''
  exec fish $LOGIN_OPTION
fi

# If not running interactively, exit.
[[ $- != *i* ]] && return

if [[ ! -d "$XDG_DATA_HOME/bash" ]]; then
  mkdir "$XDG_DATA_HOME/bash"
fi
HISTFILE="$XDG_DATA_HOME/bash/history"

PS1="[\u@\h \W]\$ "

alias ls="ls --color=auto"
alias ll="ls -l --human-readable"
alias la="ll --almost-all"

alias grep="grep --color=auto"
alias ip="ip --color=auto"

# vim: ft=bash
