"$schema" = "https://jj-vcs.github.io/jj/latest/config-schema.json"

[user]
name = "Severen Redwood"
{{- if not (eq .chezmoi.hostname "yggdrasill") }}
email = "sev@severen.dev"
{{- else }}
email = "severen.redwood@sitehost.co.nz"
{{- end }}

[ui]
default-command = "log"

[git]
subprocess = true
push-bookmark-prefix = "severen/push-"

[revset-aliases]
"slice()" = "slice(@)"
# View the entire branch (and all sub-branches thereof) that x belongs to.
"slice(x)" = "ancestors(reachable(x, mutable()), 2)"
# Find the closest bookmarks to x.
"streams(x)" = "heads(::x & bookmarks())"

[aliases]
# Note that if `@-` descends from a merge commit, the last bookmark on each
# contributing branch will be moved to `@-`.
tug = ["bookmark", "move", "--from", "streams(@-)", "--to", "@-"]
